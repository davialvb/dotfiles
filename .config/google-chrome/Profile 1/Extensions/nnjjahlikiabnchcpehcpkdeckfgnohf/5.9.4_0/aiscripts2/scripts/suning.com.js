function aiparser(e){var r=0;function t(e,r){return(Array(r).join(0)+e).slice(-r)}var c,o,n=[];if(location.href.match("product.suning")){chrome.runtime.sendMessage({cmd:"SET_GROUPS",groups:["主图","视频","SKU图片","详情"]});var s="",a=1;document.querySelectorAll(".imgzoom-thumb-main img").forEach(function(e){s=e.getAttribute("src-large"),n.push({src:s.replace(/^(https?:)?/,"https:"),group:"主图",groupIndex:0,alt:"主图-"+t(a++,2)})});var i=1;document.querySelectorAll("#colorItemList img, .tip-infor img").forEach(function(e){n.push({src:e.src.replace(/_\d+w_\d+h.*/,"").replace(/^(https?:)?/,"https:"),group:"SKU图片",groupIndex:2,alt:"SKU-"+t(i++,2)})});var m=1;document.querySelectorAll("#productDetail img").forEach(function(e){n.push({src:(e.getAttribute("src2")||e.src).replace(/^(https?:)?/,"https:"),group:"详情",groupIndex:3,alt:"详情-"+t(m++,2)})});var u=document.querySelector("#imgzoom_video_con video");u&&new VItem({src:u.src,group:"视频",groupIndex:1},r++,e,function(r){chrome.runtime.sendMessage({cmd:"ADD_VIDEO",tabId:e.id,item:r})}),chrome.runtime.sendMessage({cmd:"ADD_IMG_LIST",list:n})}else{document.querySelectorAll("img").forEach(function(e){n.push({src:e.src})});for(var d=0;d<n.length;d++)n[d].src.match("blank.gif")||(c=n[d],o=void 0,(o=c.src.replace(/^(https?:)/,"https:")).match("^//")&&(o=location.protocol+o),new ParsedPItem({src:o.replace("!cc_60x76.jpg",""),alt:c.alt,group:c.group,groupIndex:c.groupIndex},r++,e,function(r){chrome.runtime.sendMessage({cmd:"ADD_IMG",tabId:e.id,item:r})}))}}window.aiparser=aiparser,window.extras={downloadMJX:function(){var e=1,r=!1,t=document.createElement("script");t.innerText="localStorage.fatkun_sn = JSON.stringify(window.sn);",document.body.appendChild(t);var c=JSON.parse(localStorage.fatkun_sn);function o(){chrome.runtime.sendMessage({cmd:"NET",settings:{url:`https://review.suning.com/ajax/getClusterReviewImages/cluster-${c.review.clusterId}-${c.partNumber}-${c.review.vendorCode}-${e}-10-imgReviewList.htm`,dataType:"text"}},e=>{var t=JSON.parse(e.data.match("\\((.*)\\)")[1]).reviewImages;t?(t.forEach(e=>{chrome.runtime.sendMessage({cmd:"ADD_IMG_LIST",list:e.reviewImage.map(r=>({src:`${r.url.replace(/.*\/\//,"https://")}.jpg`,alt:`${e.commodityReviewId}-${r.imgSeq}`}))})}),r||setTimeout(o,2e3)):chrome.runtime.sendMessage({cmd:"COLLECT_COMPLETED"})}),e++}chrome.runtime.sendMessage({cmd:"OPEN-OUTPUT",type:"ftk-tb-review"},function(){setTimeout(function(){chrome.runtime.sendMessage({cmd:"SUPPORT_COLLECT_PAUSE"}),o()},2e3)}),chrome.runtime.onMessage.addListener(function(e){"PAUSE_COLLECT"==e.cmd?r=!0:"RESUME_COLLECT"==e.cmd&&(r=!1,o())})}};