function aiparser(e){var r=0;var t,o=[];if(location.href.match("shop\\d+.m.youzan.com")){var a=document.createElement("script");a.innerText="localStorage.ftk_pictures = JSON.stringify(window._global.goodsData.goods.pictures);localStorage.ftk_alias =window._global.alias;",document.body.appendChild(a);var c=JSON.parse(localStorage.ftk_pictures);chrome.runtime.sendMessage({cmd:"ADD_IMG_LIST",list:c.map((e,r)=>({src:e.url,group:"主图",groupIndex:0,width:e.width,height:e.height,alt:`主图-${r+1}`}))}),fetch(`https://shop19565983.youzan.com/wscdeco/biz-component/list.json?alias=${localStorage.ftk_alias}&isFastBuy=&platform=unknown&danger=0&bizName=itemDetail&queryKeys=alias%2Cplatform&stage=100&teeEnv=web`,{credentials:"include"}).then(e=>e.json()).then(e=>{var r=(new DOMParser).parseFromString(e.data.components[0].content,"text/html");chrome.runtime.sendMessage({cmd:"ADD_IMG_LIST",list:Array.from(r.querySelectorAll("img")).map((e,r)=>({src:e.src,group:"详情图",groupIndex:1,width:parseInt(e.dataset.originWidth),height:parseInt(e.dataset.originHeight),alt:`详情图-${r+1}`}))})})}else if(location.href.match("youzan.com")){document.querySelectorAll(".van-swipe-item img").forEach(function(e){o.push({src:e.dataset.src||e.src,group:"主图",groupIndex:0})}),location.href.match("m.youzan.com")?document.querySelectorAll(".m-goods-detail img").forEach(function(e){o.push({src:e.dataset.src||e.src,group:"详情",groupIndex:3})}):document.querySelectorAll(".goods-detail img").forEach(function(e){o.push({src:e.dataset.src||e.src,group:"详情",groupIndex:3})});var n=document.querySelector(".cap-video-controller video");n&&new VItem({src:n.src,group:"视频",groupIndex:1},r++,e,function(r){chrome.runtime.sendMessage({cmd:"ADD_VIDEO",tabId:e.id,item:r})})}else document.querySelectorAll("img").forEach(function(e){o.push({src:e.src})});for(var s=0;s<o.length;s++)o[s].src.match("blank.gif")||(t=o[s],new ParsedPItem({src:t.src,alt:t.alt,group:t.group,groupIndex:t.groupIndex},r++,e,function(r){chrome.runtime.sendMessage({cmd:"ADD_IMG",tabId:e.id,item:r})}))}window.aiparser=aiparser;