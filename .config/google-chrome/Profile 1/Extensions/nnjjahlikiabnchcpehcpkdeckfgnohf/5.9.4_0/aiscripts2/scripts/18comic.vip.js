function aiparser(t){chrome.runtime.sendMessage({cmd:"ADD_CROSS_DOMAIN",domain:{requetUrlReg:"cdn-msp.18comic.(vip|org)",domain:"https://18comic.vip"}});var e=0;function a(a){new ParsedPItem(a,e++,t,function(e){chrome.runtime.sendMessage({cmd:"ADD_IMG",tabId:t.id,item:e})})}location.href.match(/\/photo\//)?(imgs3=document.querySelectorAll(".thumb-overlay-albums img[data-page]"),imgs3.forEach(t=>{var e=new Image,n=document.createElement("canvas"),r=n.getContext("2d");e.setAttribute("crossorigin","anonymous"),e.src=t.dataset.original,e.onload=function(){var t=e.src.match(/(\d+).jpg/)[1],i=document.createElement("script");i.innerText=`localStorage.ftk_num = get_num(window.aid, '${t}')`,document.body.append(i);for(var o=parseInt(localStorage.ftk_num),c=parseInt(e.naturalHeight/o),m=e.naturalHeight-c*(o-1),d=0;d<o;d++)0==d&&(n.width=e.naturalWidth,n.height=e.naturalHeight),r.drawImage(e,0,c*d,e.naturalWidth,d==o-1?m:c,0,d==o-1?0:e.naturalHeight-c*(d+1),e.naturalWidth,d==o-1?m:c);var s=n.toDataURL("image/png");a({src:s,bigUrl:s,width:n.width,height:n.height})}})):document.querySelectorAll(".swiper-slide-active img").forEach(function(t){t.src.match("ep_content|ep_thumb1")&&a(t)})}window.aiparser=aiparser;